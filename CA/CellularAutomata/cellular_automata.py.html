<html><head><title>Colorized with py2html</title><meta HTTP-EQUIV="content-type" CONTENT="text/html; charset=UTF-8"></head><body><pre><font color="#cacaca">#!/usr/bin/env python
</font>
<font color="#cacaca">#Cellular Automata Visualiser
</font><font color="#cacaca">#(inspired by Wolfram's New Kind of Science)
</font><font color="#cacaca">#Vadim Kataev 2005
</font><font color="#cacaca">#vkataev at gmail.com
</font>
<font color="#7a0000">import</font> <font color="#000000">sys</font><font color="#002900">,</font><font color="#000000">pygame</font><font color="#002900">,</font> <font color="#000000">random</font>
<font color="#7a0000">from</font> <font color="#000000">pygame</font><font color="#002900">.</font><font color="#000000">locals</font> <font color="#7a0000">import</font> <font color="#002900">*</font>

<font color="#7a0000">import</font> <font color="#000000">psyco</font>
<font color="#000000">psyco</font><font color="#002900">.</font><font color="#000000">full</font><font color="#002900">(</font><font color="#002900">)</font>

<font color="#000000">SCREEN_WIDTH</font>  <font color="#002900">=</font> <font color="#00000f">1024</font>
<font color="#000000">SCREEN_HEIGHT</font> <font color="#002900">=</font> <font color="#00000f">768</font>

<font color="#000000">rows</font> <font color="#002900">=</font> <font color="#002900">[</font><font color="#002900">[</font><font color="#00000f">1</font><font color="#002900">]</font><font color="#002900">,</font><font color="#002900">]</font>
<font color="#000000">col</font> <font color="#002900">=</font> <font color="#002900">(</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">205</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">)</font>

<font color="#000000">rule_110</font> <font color="#002900">=</font> <font color="#002900">(</font><font color="#002900">(</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">)</font><font color="#002900">,</font> <font color="#002900">(</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">)</font><font color="#002900">,</font> <font color="#002900">(</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">)</font><font color="#002900">,</font> <font color="#002900">(</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">)</font><font color="#002900">,</font> <font color="#002900">(</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">)</font><font color="#002900">,</font> <font color="#002900">(</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">)</font><font color="#002900">,</font> <font color="#002900">(</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">)</font><font color="#002900">,</font> <font color="#002900">(</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">)</font><font color="#002900">)</font>
<font color="#000000">rule_30</font> <font color="#002900">=</font> <font color="#002900">(</font><font color="#002900">(</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">)</font><font color="#002900">,</font> <font color="#002900">(</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">)</font><font color="#002900">,</font> <font color="#002900">(</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">)</font><font color="#002900">,</font> <font color="#002900">(</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">)</font><font color="#002900">,</font> <font color="#002900">(</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">)</font><font color="#002900">,</font> <font color="#002900">(</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">)</font><font color="#002900">,</font> <font color="#002900">(</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">)</font><font color="#002900">,</font> <font color="#002900">(</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">)</font><font color="#002900">)</font>

<font color="#000000">sy</font> <font color="#002900">=</font> <font color="#00000f">0</font>
<font color="#000000">x_half</font> <font color="#002900">=</font> <font color="#000000">SCREEN_WIDTH</font> <font color="#002900">/</font> <font color="#00000f">2</font>

<B><font color="#550000">def</font></B> <font color="#000000">rule</font><font color="#002900">(</font><font color="#000000">left</font><font color="#002900">,</font> <font color="#000000">center</font><font color="#002900">,</font> <font color="#000000">right</font><font color="#002900">,</font> <font color="#000000">rule_num</font><font color="#002900">)</font><font color="#002900">:</font>
        <B><font color="#7a0000">for</font></B> <font color="#000000">r</font> <font color="#7a0000">in</font> <font color="#000000">rule_num</font><font color="#002900">:</font>
                <B><font color="#7a0000">if</font></B> <font color="#000000">left</font> <font color="#002900">==</font> <font color="#000000">r</font><font color="#002900">[</font><font color="#00000f">0</font><font color="#002900">]</font> <font color="#7a0000">and</font> <font color="#000000">center</font> <font color="#002900">==</font> <font color="#000000">r</font><font color="#002900">[</font><font color="#00000f">1</font><font color="#002900">]</font> <font color="#7a0000">and</font> <font color="#000000">right</font> <font color="#002900">==</font> <font color="#000000">r</font><font color="#002900">[</font><font color="#00000f">2</font><font color="#002900">]</font><font color="#002900">:</font>
                        <B><font color="#7a0000">return</font></B> <font color="#000000">r</font><font color="#002900">[</font><font color="#00000f">3</font><font color="#002900">]</font>
        <font color="#7a0000">print</font> <font color="#004080">"ERROR in Rule"</font>
        <font color="#000000">sys</font><font color="#002900">.</font><font color="#000000">exit</font><font color="#002900">(</font><font color="#002900">)</font>

<B><font color="#550000">def</font></B> <font color="#000000">build_next_row</font><font color="#002900">(</font><font color="#000000">prerow</font><font color="#002900">)</font><font color="#002900">:</font>
        <font color="#000000">row</font> <font color="#002900">=</font> <font color="#002900">[</font><font color="#002900">]</font>
        <font color="#000000">l</font> <font color="#002900">=</font> <font color="#000000">len</font><font color="#002900">(</font><font color="#000000">prerow</font><font color="#002900">)</font>
        <B><font color="#7a0000">for</font></B> <font color="#000000">i</font> <font color="#7a0000">in</font> <font color="#000000">range</font><font color="#002900">(</font><font color="#002900">-</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#000000">l</font><font color="#002900">+</font><font color="#00000f">1</font><font color="#002900">)</font><font color="#002900">:</font>
                <B><font color="#7a0000">if</font></B> <font color="#000000">i</font> <font color="#002900">==</font> <font color="#002900">-</font><font color="#00000f">1</font><font color="#002900">:</font>
                        <font color="#000000">row</font><font color="#002900">.</font><font color="#000000">append</font><font color="#002900">(</font><font color="#00000f">0</font><font color="#002900">)</font>
                        <font color="#7a0000">continue</font>
                <B><font color="#7a0000">if</font></B> <font color="#000000">i</font> <font color="#002900">==</font> <font color="#000000">l</font><font color="#002900">:</font>
                        <font color="#000000">row</font><font color="#002900">.</font><font color="#000000">append</font><font color="#002900">(</font><font color="#00000f">0</font><font color="#002900">)</font>
                        <font color="#7a0000">continue</font>

                <B><font color="#7a0000">if</font></B> <font color="#000000">i</font> <font color="#002900">==</font> <font color="#00000f">0</font><font color="#002900">:</font>
                        <font color="#000000">left</font> <font color="#002900">=</font> <font color="#00000f">0</font>
                <B><font color="#7a0000">else</font></B><font color="#002900">:</font>
                        <font color="#000000">left</font> <font color="#002900">=</font> <font color="#000000">prerow</font><font color="#002900">[</font><font color="#000000">i</font><font color="#002900">-</font><font color="#00000f">1</font><font color="#002900">]</font>
                <font color="#000000">center</font> <font color="#002900">=</font> <font color="#000000">prerow</font><font color="#002900">[</font><font color="#000000">i</font><font color="#002900">]</font>
                <B><font color="#7a0000">if</font></B> <font color="#000000">i</font> <font color="#002900">==</font> <font color="#002900">(</font><font color="#000000">l</font><font color="#002900">-</font><font color="#00000f">1</font><font color="#002900">)</font><font color="#002900">:</font>
                        <font color="#000000">right</font> <font color="#002900">=</font> <font color="#00000f">0</font>
                <B><font color="#7a0000">else</font></B><font color="#002900">:</font>
                        <font color="#000000">right</font> <font color="#002900">=</font> <font color="#000000">prerow</font><font color="#002900">[</font><font color="#000000">i</font><font color="#002900">+</font><font color="#00000f">1</font><font color="#002900">]</font>
                <font color="#000000">row</font><font color="#002900">.</font><font color="#000000">append</font><font color="#002900">(</font><font color="#000000">rule</font><font color="#002900">(</font><font color="#000000">left</font><font color="#002900">,</font> <font color="#000000">right</font><font color="#002900">,</font> <font color="#000000">center</font><font color="#002900">,</font> <font color="#000000">rule_110</font><font color="#002900">)</font><font color="#002900">)</font>
        <B><font color="#7a0000">return</font></B> <font color="#000000">row</font>

<B><font color="#550000">def</font></B> <font color="#000000">update_screen</font><font color="#002900">(</font><font color="#002900">)</font><font color="#002900">:</font>
        <font color="#7a0000">global</font> <font color="#000000">sy</font><font color="#002900">,</font> <font color="#000000">x_half</font>
        <font color="#000000">r</font> <font color="#002900">=</font> <font color="#000000">rows</font><font color="#002900">[</font><font color="#002900">-</font><font color="#00000f">1</font><font color="#002900">]</font>
        <font color="#000000">x</font> <font color="#002900">=</font> <font color="#000000">x_half</font> <font color="#002900">-</font> <font color="#000000">len</font><font color="#002900">(</font><font color="#000000">r</font><font color="#002900">)</font><font color="#002900">/</font><font color="#00000f">2</font>
        <B><font color="#7a0000">for</font></B> <font color="#000000">elem</font> <font color="#7a0000">in</font> <font color="#000000">r</font><font color="#002900">:</font>
                <B><font color="#7a0000">if</font></B> <font color="#000000">elem</font><font color="#002900">:</font>
                        <font color="#000000">screen</font><font color="#002900">.</font><font color="#000000">fill</font><font color="#002900">(</font><font color="#000000">col</font><font color="#002900">,</font><font color="#002900">(</font><font color="#000000">x</font><font color="#002900">,</font><font color="#000000">sy</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">,</font><font color="#00000f">1</font><font color="#002900">)</font><font color="#002900">)</font>
                <font color="#000000">x</font><font color="#002900">+=</font><font color="#00000f">1</font>
        <font color="#000000">sy</font><font color="#002900">+=</font><font color="#00000f">1</font>
        <B><font color="#7a0000">if</font></B> <font color="#000000">sy</font> <font color="#002900">==</font> <font color="#000000">SCREEN_HEIGHT</font><font color="#002900">:</font>
                <font color="#000000">sy</font> <font color="#002900">=</font> <font color="#00000f">0</font>
                <font color="#000000">screen</font><font color="#002900">.</font><font color="#000000">fill</font><font color="#002900">(</font><font color="#002900">(</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">0</font><font color="#002900">,</font><font color="#00000f">2</font><font color="#002900">)</font><font color="#002900">)</font>

<B><font color="#550000">def</font></B> <font color="#000000">update_rows</font><font color="#002900">(</font><font color="#002900">)</font><font color="#002900">:</font>
        <font color="#7a0000">global</font> <font color="#000000">rows</font>
        <font color="#000000">rows</font><font color="#002900">.</font><font color="#000000">append</font><font color="#002900">(</font><font color="#000000">build_next_row</font><font color="#002900">(</font><font color="#000000">rows</font><font color="#002900">[</font><font color="#002900">-</font><font color="#00000f">1</font><font color="#002900">]</font><font color="#002900">)</font><font color="#002900">)</font>
        <font color="#000000">rows</font> <font color="#002900">=</font> <font color="#000000">rows</font><font color="#002900">[</font><font color="#00000f">1</font><font color="#002900">:</font><font color="#002900">]</font>
        <font color="#000000">update_screen</font><font color="#002900">(</font><font color="#002900">)</font>

<B><font color="#550000">def</font></B> <font color="#000000">init</font><font color="#002900">(</font><font color="#002900">)</font><font color="#002900">:</font>
    <font color="#7a0000">global</font> <font color="#000000">background</font><font color="#002900">,</font> <font color="#000000">screen</font>
    <font color="#000000">pygame</font><font color="#002900">.</font><font color="#000000">init</font><font color="#002900">(</font><font color="#002900">)</font>
    <font color="#000000">screen</font> <font color="#002900">=</font> <font color="#000000">pygame</font><font color="#002900">.</font><font color="#000000">display</font><font color="#002900">.</font><font color="#000000">set_mode</font><font color="#002900">(</font><font color="#002900">(</font><font color="#000000">SCREEN_WIDTH</font><font color="#002900">,</font><font color="#000000">SCREEN_HEIGHT</font><font color="#002900">)</font><font color="#002900">)</font><font color="#cacaca">#,pygame.FULLSCREEN)</font>
    <font color="#000000">pygame</font><font color="#002900">.</font><font color="#000000">display</font><font color="#002900">.</font><font color="#000000">set_caption</font><font color="#002900">(</font><font color="#004080">"Cellular automata"</font><font color="#002900">)</font>

<B><font color="#550000">def</font></B> <font color="#000000">main</font><font color="#002900">(</font><font color="#002900">)</font><font color="#002900">:</font>
    <font color="#000000">angle</font><font color="#002900">=</font><font color="#00000f">0</font>
    <B><font color="#7a0000">while</font></B> <font color="#00000f">1</font><font color="#002900">:</font>
            <B><font color="#7a0000">for</font></B> <font color="#000000">event</font> <font color="#7a0000">in</font> <font color="#000000">pygame</font><font color="#002900">.</font><font color="#000000">event</font><font color="#002900">.</font><font color="#000000">get</font><font color="#002900">(</font><font color="#002900">)</font><font color="#002900">:</font>
                    <B><font color="#7a0000">if</font></B> <font color="#000000">event</font><font color="#002900">.</font><font color="#000000">type</font><font color="#002900">==</font><font color="#000000">pygame</font><font color="#002900">.</font><font color="#000000">QUIT</font><font color="#002900">:</font>
                            <font color="#000000">pygame</font><font color="#002900">.</font><font color="#000000">quit</font><font color="#002900">(</font><font color="#002900">)</font>
                            <font color="#000000">sys</font><font color="#002900">.</font><font color="#000000">exit</font><font color="#002900">(</font><font color="#002900">)</font>
                    <B><font color="#7a0000">if</font></B> <font color="#000000">event</font><font color="#002900">.</font><font color="#000000">type</font><font color="#002900">==</font><font color="#000000">pygame</font><font color="#002900">.</font><font color="#000000">KEYDOWN</font><font color="#002900">:</font>
                            <font color="#000000">pygame</font><font color="#002900">.</font><font color="#000000">quit</font><font color="#002900">(</font><font color="#002900">)</font>
                            <font color="#000000">sys</font><font color="#002900">.</font><font color="#000000">exit</font><font color="#002900">(</font><font color="#002900">)</font>

            <font color="#000000">update_rows</font><font color="#002900">(</font><font color="#002900">)</font>
            <font color="#000000">pygame</font><font color="#002900">.</font><font color="#000000">display</font><font color="#002900">.</font><font color="#000000">flip</font><font color="#002900">(</font><font color="#002900">)</font>


<font color="#000000">init</font><font color="#002900">(</font><font color="#002900">)</font>
<font color="#000000">main</font><font color="#002900">(</font><font color="#002900">)</font>

<font color="#cacaca">#import profile
</font><font color="#cacaca">#profile.run('main()')</font><font color="#000000"></font></pre></body></html>